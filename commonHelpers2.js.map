{"version":3,"file":"commonHelpers2.js","sources":["../src/img/global/icons.svg#trash","../src/js/shopping-main.js"],"sourcesContent":["export default \"__VITE_ASSET__883ded96__$_#trash__\"","import trashIcon from '../img/global/icons.svg#trash';\nconst empty = document.querySelector('.shopping-list-empty');\nconst list = document.querySelector('.js-shop-list');\n\nconst LS_KEY = 'user-shopping-list';\nconst shopArr = JSON.parse(localStorage.getItem(LS_KEY)) || [];\nconsole.log('shopArr', shopArr);\nconsole.log(shopArr.length);\n\nconst pagination = document.querySelector('.pagination');\npagination.classList.add('visually-hidden');\n\nconst prev = document.querySelector('.prev');\nprev.disabled = true;\n\nconst next = document.querySelector('.next');\n\nconst doublePrev = document.querySelector('.double-prev');\ndoublePrev.disabled = true;\n\nconst doubleNext = document.querySelector('.double-next');\n\nconst buttonsNumbers = document.querySelector('.buttons-numbers');\n\nconst perPage = 4;\nlet currentPage = 1;\n\nfunction createMarkup(arr, page, perPage) {\n  const start = (page - 1) * perPage;\n  const end = start + perPage;\n  const itemsRender = arr.slice(start, end);\n\n  return itemsRender\n    .map(\n      ({\n        _id,\n        list_name,\n        amazon_product_url,\n        author,\n        book_image,\n        book_uri,\n        contributor,\n        description,\n        publisher,\n        title,\n      }) => `<li data-id=\"${_id}\" class=\"shopping-list-card js-trash\">\n            <div class=\"shopping-list-card-flex\"><img class=\"list-card-img\" src=\"${book_image}\" alt=\"${author}\">\n              <div>\n                <div class=\"shop-trash-flex\">\n                  <div>\n                    <h3 class=\"list-card-title\">${title}</h3>\n                    <p class=\"list-card-subtitle\">${list_name}</p>\n                  </div>\n                  <div class=\"shop-trash-bg js-test\">\n                    <svg class=\"shop-trash\">\n                      <use href=\"${trashIcon}\"></use>\n                    </svg>\n                  </div>\n                 </div>\n                <div class=\"shop-text-flex\">\n                 <p class=\"list-card-text\">${description}</p>\n                  <div class=\"list-card-flex\">\n                    <p class=\"list-card-contributor\">${contributor}</p>\n                    <div class=\"list-card-icon-flex\">\n                      <a class=\"list-card-amazon-url\" href=\"${amazon_product_url}\"></a>\n                      <a class=\"list-card-book-url\" href=\"${book_uri}\"></a>\n                   </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </li>`\n    )\n    .join('');\n}\n\nfunction renderPage(arr, page, perPage) {\n  const markup = createMarkup(arr, page, perPage);\n  list.innerHTML = markup;\n\n  if (arr.length === 0) {\n    pagination.classList.add('visually-hidden');\n    empty.classList.remove('visually-hidden');\n  } else {\n    pagination.classList.remove('visually-hidden');\n    empty.classList.add('visually-hidden');\n  }\n\n  if (arr.length <= perPage) {\n    pagination.classList.add('visually-hidden');\n  } else {\n    pagination.classList.remove('visually-hidden');\n  }\n\n  const totalPages = Math.ceil(arr.length / perPage);\n\n  if (totalPages <= 2) {\n    doublePrev.classList.add('visually-hidden');\n    doubleNext.classList.add('visually-hidden');\n  } else {\n    doublePrev.classList.remove('visually-hidden');\n    doubleNext.classList.remove('visually-hidden');\n  }\n}\n\nfunction renderButtonsPagination(arr) {\n  const totalPages = Math.ceil(arr.length / perPage);\n\n  buttonsNumbers.innerHTML = '';\n\n  for (let i = 1; i <= totalPages; i += 1) {\n    const button = document.createElement('button');\n    button.classList.add('bth-num');\n    button.textContent = i;\n    buttonsNumbers.appendChild(button);\n\n    if (i === currentPage) {\n      button.classList.add('bth-active');\n    }\n\n    button.addEventListener('click', () => {\n      currentPage = i;\n\n      renderPage(arr, currentPage, perPage);\n      updateButtonsVisibility();\n      updateActiveClass();\n\n      if (currentPage === 1) {\n        prev.disabled = true;\n        doublePrev.disabled = true;\n      } else {\n        prev.disabled = false;\n        doublePrev.disabled = false;\n      }\n\n      if (currentPage === totalPages) {\n        next.disabled = true;\n        doubleNext.disabled = true;\n      } else {\n        next.disabled = false;\n        doubleNext.disabled = false;\n      }\n    });\n  }\n\n  updateButtonsVisibility();\n  updateActiveClass();\n}\n\nfunction updateActiveClass() {\n  const allButtons = document.querySelectorAll('.bth-num');\n\n  allButtons.forEach((button, index) => {\n    const isActivePage = index + 1 === currentPage;\n\n    if (isActivePage) {\n      button.classList.add('bth-active');\n      button.disabled = true;\n    } else {\n      button.classList.remove('bth-active');\n      button.disabled = false;\n    }\n  });\n}\n\nfunction updateButtonsVisibility() {\n  const allButtons = document.querySelectorAll('.bth-num');\n  const totalPages = Math.ceil(shopArr.length / perPage);\n\n  allButtons.forEach((button, index) => {\n    if (currentPage === 1) {\n      if (index + 1 <= 3) {\n        button.classList.remove('visually-hidden');\n      } else {\n        button.classList.add('visually-hidden');\n      }\n    } else if (currentPage === totalPages) {\n      if (index + 1 > totalPages - 3) {\n        button.classList.remove('visually-hidden');\n      } else {\n        button.classList.add('visually-hidden');\n      }\n    } else {\n      if (\n        index + 1 === currentPage ||\n        index + 2 === currentPage ||\n        index === currentPage\n      ) {\n        button.classList.remove('visually-hidden');\n      } else {\n        button.classList.add('visually-hidden');\n      }\n    }\n  });\n}\n\nrenderPage(shopArr, currentPage, perPage);\nrenderButtonsPagination(shopArr);\n\nprev.addEventListener('click', () => {\n  if (currentPage > 1) {\n    currentPage -= 1;\n\n    renderPage(shopArr, currentPage, perPage);\n    updateButtonsVisibility();\n    updateActiveClass();\n  }\n\n  if (currentPage === 1) {\n    prev.disabled = true;\n    doublePrev.disabled = true;\n  }\n\n  next.disabled = false;\n  doubleNext.disabled = false;\n});\n\nnext.addEventListener('click', () => {\n  const totalPages = Math.ceil(shopArr.length / perPage);\n  if (currentPage < totalPages) {\n    currentPage += 1;\n\n    renderPage(shopArr, currentPage, perPage);\n    updateButtonsVisibility();\n    updateActiveClass();\n  }\n\n  if (currentPage === totalPages) {\n    next.disabled = true;\n    doubleNext.disabled = true;\n  }\n\n  prev.disabled = false;\n  doublePrev.disabled = false;\n});\n\ndoublePrev.addEventListener('click', () => {\n  currentPage = 1;\n\n  renderPage(shopArr, currentPage, perPage);\n  updateButtonsVisibility();\n  updateActiveClass();\n\n  prev.disabled = true;\n  next.disabled = false;\n\n  doublePrev.disabled = true;\n  doubleNext.disabled = false;\n});\n\ndoubleNext.addEventListener('click', () => {\n  const totalPages = Math.ceil(shopArr.length / perPage);\n\n  currentPage = totalPages;\n\n  renderPage(shopArr, currentPage, perPage);\n  updateButtonsVisibility();\n  updateActiveClass();\n\n  next.disabled = true;\n  doubleNext.disabled = true;\n\n  prev.disabled = false;\n  doublePrev.disabled = false;\n});\n\nfunction redirectToLastPage() {\n  const totalPages = Math.ceil(shopArr.length / perPage);\n  currentPage = totalPages;\n  renderPage(shopArr, currentPage, perPage);\n  renderButtonsPagination(shopArr);\n}\n\nlist.addEventListener('click', handlerShop);\n\nfunction handlerShop(e) {\n  if (\n    e.target.classList.value === 'shop-trash-bg js-test' ||\n    e.target.classList.value === 'shop-trash'\n  ) {\n    const currentProduct = e.target.closest('.js-trash');\n    const idBook = currentProduct.dataset.id;\n\n    const confirmProduct = confirm(`Remove book?`);\n\n    if (confirmProduct) {\n      const product = shopArr.findIndex(({ _id: id }) => id === idBook);\n      shopArr.splice(product, 1);\n\n      localStorage.setItem(LS_KEY, JSON.stringify(shopArr));\n\n      renderPage(shopArr, currentPage, perPage);\n      renderButtonsPagination(shopArr);\n\n      const totalPages = Math.ceil(shopArr.length / perPage);\n\n      if (currentPage > totalPages) {\n        redirectToLastPage();\n      } else {\n        renderPage(shopArr, currentPage, perPage);\n        renderButtonsPagination(shopArr);\n      }\n    }\n  }\n}\n"],"names":["trashIcon","empty","list","LS_KEY","shopArr","pagination","prev","next","doublePrev","doubleNext","buttonsNumbers","perPage","currentPage","createMarkup","arr","page","start","end","_id","list_name","amazon_product_url","author","book_image","book_uri","contributor","description","publisher","title","renderPage","markup","renderButtonsPagination","totalPages","i","button","updateButtonsVisibility","updateActiveClass","index","allButtons","redirectToLastPage","handlerShop","e","idBook","product","id"],"mappings":"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"}