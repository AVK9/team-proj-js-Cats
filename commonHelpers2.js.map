{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-main.js"],"sourcesContent":["const empty = document.querySelector('.shopping-list-empty');\nconst list = document.querySelector('.js-shop-list');\n\nconst LS_KEY = 'user-shopping-list';\nconst shopArr = JSON.parse(localStorage.getItem(LS_KEY));\nconsole.log('shopArr', shopArr);\nconsole.log(shopArr.length);\nif (shopArr.length === 0) {\n  empty.classList.remove('hidden');\n} else {\n  const pagination = document.querySelector('.pagination');\n  pagination.classList.add('hidden-pagination');\n\n  const prev = document.querySelector('.prev');\n  prev.disabled = true;\n\n  const next = document.querySelector('.next');\n\n  const doublePrev = document.querySelector('.double-prev');\n  doublePrev.disabled = true;\n\n  const doubleNext = document.querySelector('.double-next');\n\n  const buttonsNumbers = document.querySelector('.buttons-numbers');\n\n  const perPage = 4;\n  let currentPage = 1;\n\n  function createMarkup(arr, page = 1, perPage = 4) {\n    const start = (page - 1) * perPage;\n    const end = start + perPage;\n    const itemsRender = arr.slice(start, end);\n\n    return itemsRender\n      .map(\n        ({\n          _id,\n          list_name,\n          amazon_product_url,\n          author,\n          book_image,\n          book_uri,\n          contributor,\n          description,\n          publisher,\n          title,\n        }) => `<li data-id=\"${_id}\" class=\"shopping-list-card js-trash\">\n              <div class=\"shopping-list-card-flex\"><img class=\"list-card-img\" src=\"${book_image}\" alt=\"${author}\">\n                <div>\n                  <div class=\"shop-trash-flex\">\n                    <div>\n                      <h3 class=\"list-card-title\">${title}</h3>\n                      <p class=\"list-card-subtitle\">${list_name}</p>\n                    </div>\n                    <div class=\"shop-trash-bg js-test\">\n                      <svg class=\"shop-trash\">\n                        <use href=\"./img/global/icons.svg#trash\"></use>\n                      </svg>\n                    </div>\n                  </div>\n                  <div class=\"shop-text-flex\">\n                    <p class=\"list-card-text\">${description}</p>\n                    <div class=\"list-card-flex\">\n                      <p class=\"list-card-contributor\">${contributor}</p>\n                      <div class=\"list-card-icon-flex\">\n                        <a class=\"list-card-amazon-url\" href=\"${amazon_product_url}\"></a>\n                        <a class=\"list-card-book-url\" href=\"${book_uri}\"></a>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </li>`\n      )\n      .join('');\n  }\n  function renderPage(arr, page, perPage) {\n    const markup = createMarkup(arr, page, perPage);\n    list.innerHTML = markup;\n    if (arr.length <= perPage) {\n      pagination.classList.add('hidden-pagination');\n    } else {\n      pagination.classList.remove('hidden-pagination');\n    }\n\n    const totalPages = Math.ceil(arr.length / perPage);\n\n    if (totalPages <= 2) {\n      doublePrev.classList.add('hidden-pagination');\n      doubleNext.classList.add('hidden-pagination');\n    } else {\n      doublePrev.classList.remove('hidden-pagination');\n      doubleNext.classList.remove('hidden-pagination');\n    }\n  }\n\n  function renderButtonsPagination(arr) {\n    const totalPages = Math.ceil(arr.length / perPage);\n\n    buttonsNumbers.innerHTML = '';\n\n    for (let i = 1; i <= totalPages; i += 1) {\n      const button = document.createElement('button');\n      button.classList.add('bth-num');\n      button.textContent = i;\n      buttonsNumbers.appendChild(button);\n\n      if (i === currentPage) {\n        button.classList.add('bth-active');\n      }\n\n      button.addEventListener('click', () => {\n        currentPage = i;\n\n        renderPage(arr, currentPage, perPage);\n        updateButtonsVisibility();\n        updateActiveClass();\n\n        if (currentPage === 1) {\n          prev.disabled = true;\n          doublePrev.disabled = true;\n        } else {\n          prev.disabled = false;\n          doublePrev.disabled = false;\n        }\n\n        if (currentPage === totalPages) {\n          next.disabled = true;\n          doubleNext.disabled = true;\n        } else {\n          next.disabled = false;\n          doubleNext.disabled = false;\n        }\n      });\n    }\n\n    updateButtonsVisibility();\n    updateActiveClass();\n  }\n\n  function updateActiveClass() {\n    const allButtons = document.querySelectorAll('.bth-num');\n\n    allButtons.forEach((button, index) => {\n      const isActivePage = index + 1 === currentPage;\n\n      if (isActivePage) {\n        button.classList.add('bth-active');\n        button.disabled = true;\n      } else {\n        button.classList.remove('bth-active');\n        button.disabled = false;\n      }\n    });\n  }\n\n  function updateButtonsVisibility() {\n    const allButtons = document.querySelectorAll('.bth-num');\n    const totalPages = Math.ceil(shopArr.length / perPage);\n\n    allButtons.forEach((button, index) => {\n      if (currentPage === 1) {\n        if (index + 1 <= 3) {\n          button.classList.remove('hidden-pagination');\n        } else {\n          button.classList.add('hidden-pagination');\n        }\n      } else if (currentPage === totalPages) {\n        if (index + 1 > totalPages - 3) {\n          button.classList.remove('hidden-pagination');\n        } else {\n          button.classList.add('hidden-pagination');\n        }\n      } else {\n        if (\n          index + 1 === currentPage ||\n          index + 2 === currentPage ||\n          index === currentPage\n        ) {\n          button.classList.remove('hidden-pagination');\n        } else {\n          button.classList.add('hidden-pagination');\n        }\n      }\n    });\n  }\n\n  renderPage(shopArr, currentPage, perPage);\n  renderButtonsPagination(shopArr);\n\n  prev.addEventListener('click', () => {\n    if (currentPage > 1) {\n      currentPage -= 1;\n\n      renderPage(shopArr, currentPage, perPage);\n      updateButtonsVisibility();\n      updateActiveClass();\n    }\n\n    if (currentPage === 1) {\n      prev.disabled = true;\n      doublePrev.disabled = true;\n    } else {\n      next.disabled = false;\n      doubleNext.disabled = false;\n    }\n  });\n\n  next.addEventListener('click', () => {\n    const totalPages = Math.ceil(shopArr.length / perPage);\n    if (currentPage < totalPages) {\n      currentPage += 1;\n\n      renderPage(shopArr, currentPage, perPage);\n      updateButtonsVisibility();\n      updateActiveClass();\n    }\n\n    if (currentPage === totalPages) {\n      next.disabled = true;\n      doubleNext.disabled = true;\n    } else {\n      prev.disabled = false;\n      doublePrev.disabled = false;\n    }\n  });\n\n  doublePrev.addEventListener('click', () => {\n    currentPage = 1;\n\n    renderPage(shopArr, currentPage, perPage);\n    updateButtonsVisibility();\n    updateActiveClass();\n\n    prev.disabled = true;\n    next.disabled = false;\n\n    doublePrev.disabled = true;\n    doubleNext.disabled = false;\n  });\n\n  doubleNext.addEventListener('click', () => {\n    const totalPages = Math.ceil(shopArr.length / perPage);\n\n    currentPage = totalPages;\n\n    renderPage(shopArr, currentPage, perPage);\n    updateButtonsVisibility();\n    updateActiveClass();\n\n    next.disabled = true;\n    doubleNext.disabled = true;\n\n    prev.disabled = false;\n    doublePrev.disabled = false;\n  });\n\n  list.addEventListener('click', handlerShop);\n\n  function handlerShop(e) {\n    if (\n      e.target.classList.value === 'shop-trash-bg js-test' ||\n      e.target.classList.value === 'shop-trash'\n    ) {\n      const currentProduct = e.target.closest('.js-trash');\n      const idBook = currentProduct.dataset.id;\n\n      const confirmProduct = confirm(`Remove book?`);\n\n      if (confirmProduct) {\n        const product = shopArr.findIndex(({ _id: id }) => id === idBook);\n        shopArr.splice(product, 1);\n\n        localStorage.setItem(LS_KEY, JSON.stringify(shopArr));\n\n        list.innerHTML = createMarkup(shopArr);\n        if (shopArr.length === 0) {\n          empty.classList.remove('hidden');\n          pagination.classList.add('hidden');\n        }\n      }\n    }\n  }\n}\n"],"names":["empty","list","LS_KEY","shopArr","createMarkup","arr","page","perPage","start","end","_id","list_name","amazon_product_url","author","book_image","book_uri","contributor","description","publisher","title","renderPage","markup","pagination","doublePrev","doubleNext","renderButtonsPagination","totalPages","buttonsNumbers","i","button","currentPage","updateButtonsVisibility","updateActiveClass","prev","next","index","allButtons","handlerShop","e","idBook","product","id"],"mappings":"gCAAA,MAAMA,EAAQ,SAAS,cAAc,sBAAsB,EACrDC,EAAO,SAAS,cAAc,eAAe,EAE7CC,EAAS,qBACTC,EAAU,KAAK,MAAM,aAAa,QAAQD,CAAM,CAAC,EACvD,QAAQ,IAAI,UAAWC,CAAO,EAC9B,QAAQ,IAAIA,EAAQ,MAAM,EAC1B,GAAIA,EAAQ,SAAW,EACrBH,EAAM,UAAU,OAAO,QAAQ,MAC1B,CAmBL,IAASI,EAAT,SAAsBC,EAAKC,EAAO,EAAGC,EAAU,EAAG,CAChD,MAAMC,GAASF,EAAO,GAAKC,EACrBE,EAAMD,EAAQD,EAGpB,OAFoBF,EAAI,MAAMG,EAAOC,CAAG,EAGrC,IACC,CAAC,CACC,IAAAC,EACA,UAAAC,EACA,mBAAAC,EACA,OAAAC,EACA,WAAAC,EACA,SAAAC,EACA,YAAAC,EACA,YAAAC,EACA,UAAAC,EACA,MAAAC,CACV,IAAc,gBAAgBT;AAAA,qFACuDI,WAAoBD;AAAA;AAAA;AAAA;AAAA,oDAIrDM;AAAA,sDACER;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDASNM;AAAA;AAAA,yDAESD;AAAA;AAAA,gEAEOJ;AAAA,8DACFG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOvD,EACA,KAAK,EAAE,CACX,EACQK,EAAT,SAAoBf,EAAKC,EAAMC,EAAS,CACtC,MAAMc,EAASjB,EAAaC,EAAKC,EAAMC,CAAO,EAC9CN,EAAK,UAAYoB,EACbhB,EAAI,QAAUE,EAChBe,EAAW,UAAU,IAAI,mBAAmB,EAE5CA,EAAW,UAAU,OAAO,mBAAmB,EAG9B,KAAK,KAAKjB,EAAI,OAASE,CAAO,GAE/B,GAChBgB,EAAW,UAAU,IAAI,mBAAmB,EAC5CC,EAAW,UAAU,IAAI,mBAAmB,IAE5CD,EAAW,UAAU,OAAO,mBAAmB,EAC/CC,EAAW,UAAU,OAAO,mBAAmB,EAElD,EAEQC,EAAT,SAAiCpB,EAAK,CACpC,MAAMqB,EAAa,KAAK,KAAKrB,EAAI,OAASE,CAAO,EAEjDoB,EAAe,UAAY,GAE3B,QAASC,EAAI,EAAGA,GAAKF,EAAYE,GAAK,EAAG,CACvC,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,UAAU,IAAI,SAAS,EAC9BA,EAAO,YAAcD,EACrBD,EAAe,YAAYE,CAAM,EAE7BD,IAAME,GACRD,EAAO,UAAU,IAAI,YAAY,EAGnCA,EAAO,iBAAiB,QAAS,IAAM,CACrCC,EAAcF,EAEdR,EAAWf,EAAKyB,EAAavB,CAAO,EACpCwB,IACAC,IAEIF,IAAgB,GAClBG,EAAK,SAAW,GAChBV,EAAW,SAAW,KAEtBU,EAAK,SAAW,GAChBV,EAAW,SAAW,IAGpBO,IAAgBJ,GAClBQ,EAAK,SAAW,GAChBV,EAAW,SAAW,KAEtBU,EAAK,SAAW,GAChBV,EAAW,SAAW,GAEhC,CAAO,CACF,CAEDO,IACAC,GACD,EAEQA,EAAT,UAA6B,CACR,SAAS,iBAAiB,UAAU,EAE5C,QAAQ,CAACH,EAAQM,IAAU,CACfA,EAAQ,IAAML,GAGjCD,EAAO,UAAU,IAAI,YAAY,EACjCA,EAAO,SAAW,KAElBA,EAAO,UAAU,OAAO,YAAY,EACpCA,EAAO,SAAW,GAE1B,CAAK,CACF,EAEQE,EAAT,UAAmC,CACjC,MAAMK,EAAa,SAAS,iBAAiB,UAAU,EACjDV,EAAa,KAAK,KAAKvB,EAAQ,OAASI,CAAO,EAErD6B,EAAW,QAAQ,CAACP,EAAQM,IAAU,CAChCL,IAAgB,EACdK,EAAQ,GAAK,EACfN,EAAO,UAAU,OAAO,mBAAmB,EAE3CA,EAAO,UAAU,IAAI,mBAAmB,EAEjCC,IAAgBJ,EACrBS,EAAQ,EAAIT,EAAa,EAC3BG,EAAO,UAAU,OAAO,mBAAmB,EAE3CA,EAAO,UAAU,IAAI,mBAAmB,EAIxCM,EAAQ,IAAML,GACdK,EAAQ,IAAML,GACdK,IAAUL,EAEVD,EAAO,UAAU,OAAO,mBAAmB,EAE3CA,EAAO,UAAU,IAAI,mBAAmB,CAGlD,CAAK,CACF,EA0EQQ,EAAT,SAAqBC,EAAG,CACtB,GACEA,EAAE,OAAO,UAAU,QAAU,yBAC7BA,EAAE,OAAO,UAAU,QAAU,aAC7B,CAEA,MAAMC,EADiBD,EAAE,OAAO,QAAQ,WAAW,EACrB,QAAQ,GAItC,GAFuB,QAAQ,cAAc,EAEzB,CAClB,MAAME,EAAUrC,EAAQ,UAAU,CAAC,CAAE,IAAKsC,CAAI,IAAKA,IAAOF,CAAM,EAChEpC,EAAQ,OAAOqC,EAAS,CAAC,EAEzB,aAAa,QAAQtC,EAAQ,KAAK,UAAUC,CAAO,CAAC,EAEpDF,EAAK,UAAYG,EAAaD,CAAO,EACjCA,EAAQ,SAAW,IACrBH,EAAM,UAAU,OAAO,QAAQ,EAC/BsB,EAAW,UAAU,IAAI,QAAQ,EAEpC,CACF,CACF,EAhRD,MAAMA,EAAa,SAAS,cAAc,aAAa,EACvDA,EAAW,UAAU,IAAI,mBAAmB,EAE5C,MAAMW,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,SAAW,GAEhB,MAAMC,EAAO,SAAS,cAAc,OAAO,EAErCX,EAAa,SAAS,cAAc,cAAc,EACxDA,EAAW,SAAW,GAEtB,MAAMC,EAAa,SAAS,cAAc,cAAc,EAElDG,EAAiB,SAAS,cAAc,kBAAkB,EAE1DpB,EAAU,EAChB,IAAIuB,EAAc,EAiKlBV,EAAWjB,EAAS2B,EAAavB,CAAO,EACxCkB,EAAwBtB,CAAO,EAE/B8B,EAAK,iBAAiB,QAAS,IAAM,CAC/BH,EAAc,IAChBA,GAAe,EAEfV,EAAWjB,EAAS2B,EAAavB,CAAO,EACxCwB,IACAC,KAGEF,IAAgB,GAClBG,EAAK,SAAW,GAChBV,EAAW,SAAW,KAEtBW,EAAK,SAAW,GAChBV,EAAW,SAAW,GAE5B,CAAG,EAEDU,EAAK,iBAAiB,QAAS,IAAM,CACnC,MAAMR,EAAa,KAAK,KAAKvB,EAAQ,OAASI,CAAO,EACjDuB,EAAcJ,IAChBI,GAAe,EAEfV,EAAWjB,EAAS2B,EAAavB,CAAO,EACxCwB,IACAC,KAGEF,IAAgBJ,GAClBQ,EAAK,SAAW,GAChBV,EAAW,SAAW,KAEtBS,EAAK,SAAW,GAChBV,EAAW,SAAW,GAE5B,CAAG,EAEDA,EAAW,iBAAiB,QAAS,IAAM,CACzCO,EAAc,EAEdV,EAAWjB,EAAS2B,EAAavB,CAAO,EACxCwB,IACAC,IAEAC,EAAK,SAAW,GAChBC,EAAK,SAAW,GAEhBX,EAAW,SAAW,GACtBC,EAAW,SAAW,EAC1B,CAAG,EAEDA,EAAW,iBAAiB,QAAS,IAAM,CAGzCM,EAFmB,KAAK,KAAK3B,EAAQ,OAASI,CAAO,EAIrDa,EAAWjB,EAAS2B,EAAavB,CAAO,EACxCwB,IACAC,IAEAE,EAAK,SAAW,GAChBV,EAAW,SAAW,GAEtBS,EAAK,SAAW,GAChBV,EAAW,SAAW,EAC1B,CAAG,EAEDtB,EAAK,iBAAiB,QAASoC,CAAW,CA0B5C"}